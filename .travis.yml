language: node_js
node_js:
- 4.1
after_success:
- >-
  test $TRAVIS_TAG &&
  npm run psc-publish \
    | tail -n 1 \
    | gzip \
    > output/purescript-neon-${TRAVIS_TAG}.json.gz &&
  curl -X POST http://pursuit.purescript.org/packages \
    -d @output/purescript-neon-${TRAVIS_TAG}.json \
    -H 'Accept: application/json' \
    -H "Authorization: token ${GITHUB_TOKEN}" \
    -H 'Content-Encoding: gzip'
cache:
  directories:
  - node_modules
